2025-08-17 17:11:04,258 - INFO - Sending CSR to Compliance API
2025-08-17 17:11:04,258 - INFO - https://gw-fatoora.zatca.gov.sa/e-invoicing/developer-portal/compliance
2025-08-17 17:11:04,892 - ERROR - Compliance API returned status 400
2025-08-17 17:11:04,892 - ERROR - Compliance API error: ['Organization Unit Name must be the 10-digit TIN number of the individual group member whose device is being onboarded']
2025-08-17 17:11:04,892 - ERROR - Unexpected error in Compliance CSID endpoint
Traceback (most recent call last):
  File "C:\Users\scorp\Desktop\MicroPOS\ksa-compliance\routers\onboarding.py", line 100, in get_compliance_csid_endpoint
    raise HTTPException(status_code=500, detail="Failed to get Compliance CSID")
fastapi.exceptions.HTTPException: 500: Failed to get Compliance CSID
2025-08-17 17:17:15,921 - INFO - Received CSR generation request for VAT: 301012414510123
2025-08-17 17:17:15,922 - ERROR - Missing required field: 'rest_name'
2025-08-17 17:17:31,185 - INFO - Received CSR generation request for VAT: 301012414510123
2025-08-17 17:17:31,599 - INFO - CSR generation successful, UUID: 0bcc004a-380f-43d9-a41b-d3595ba3dfc9
2025-08-17 17:17:51,524 - INFO - Sending CSR to Compliance API
2025-08-17 17:17:51,524 - INFO - https://gw-fatoora.zatca.gov.sa/e-invoicing/developer-portal/compliance
2025-08-17 17:17:52,319 - INFO - Compliance CSID response: {'requestID': 1234567890123, 'dispositionMessage': 'ISSUED', 'binarySecurityToken': 'TUlJQ05UQ0NBZHVnQXdJQkFnSUdBWmk0bThBS01Bb0dDQ3FHU000OUJBTUNNQlV4RXpBUkJnTlZCQU1NQ21WSmJuWnZhV05wYm1jd0hoY05NalV3T0RFM01UVXhOelEyV2hjTk16QXdPREUyTWpFd01EQXdXakJwTVFzd0NRWURWUVFHRXdKVFFURVNNQkFHQTFVRUNnd0pkR1Z6ZENCeVpYTjBNUk13RVFZRFZRUUxEQW94TWpNME5UWTNPRGs0TVRFd0x3WURWUVFERENoVVUxUXRNR0pqWXpBd05HRXRNemd3WmkwME0yUTVMV0UwTVdJdFpETTFPVFZpWVROa1ptTTVNRll3RUFZSEtvWkl6ajBDQVFZRks0RUVBQW9EUWdBRW4xcTlkZlBJVFpZdVljVnB3bUhlSkVkN2V2SjJDdm1YcWJySTRnQ0VZV0tUZTJ2NmZ1K1FEZFN5UDF0d20wUldQaFFQdVhOQVRTZTQxcDZ5V3RTcHlhT0J4VENCd2pBTUJnTlZIUk1CQWY4RUFqQUFNSUd4QmdOVkhSRUVnYWt3Z2Fha2dhTXdnYUF4UWpCQUJnTlZCQVFNT1RFdFRXbGpjbTlRVDFOOE1pMHhMakF1TUh3ekxUQmlZMk13TURSaExUTTRNR1l0TkROa09TMWhOREZpTFdRek5UazFZbUV6Wkdaak9URWZNQjBHQ2dtU0pvbVQ4aXhrQVFFTUR6TXdNVEF4TWpReE5EVXhNREV5TXpFTk1Bc0dBMVVFREF3RU1UQXdNREVWTUJNR0ExVUVHZ3dNZEdWemRDQmhaR1J5WlhOek1STXdFUVlEVlFRUERBcFNaWE4wWVhWeVlXNTBNQW9HQ0NxR1NNNDlCQU1DQTBnQU1FVUNJRnY5R2N4cDlwQ0lSM3VYa0lnWnNGMzFPSm9yQkt5by9SOXcyalg3ck9WQUFpRUFxb1c4eFQraUVCZVhjQVI5SXVGNDJST2g1bmJLcGZKeDQ1enpGbi9iakkwPQ==', 'secret': 'C0gwD3zHI5TURXfzncPGRyZSBsy6NihPIvPZPjFIqVk=', 'errors': None}
2025-08-18 12:21:22,712 - INFO - Received CSR generation request for VAT: 301012414510123
2025-08-18 12:21:24,586 - INFO - CSR generation successful, UUID: 87365f6f-e3bd-4ff9-bef0-d2147d24f3b1
2025-08-18 12:21:57,629 - INFO - Sending CSR to Compliance API
2025-08-18 12:21:57,629 - INFO - https://gw-fatoora.zatca.gov.sa/e-invoicing/developer-portal/compliance
2025-08-18 12:21:58,334 - INFO - Compliance CSID response: {'requestID': 1234567890123, 'dispositionMessage': 'ISSUED', 'binarySecurityToken': 'TUlJQ05UQ0NBZHVnQXdJQkFnSUdBWmk4c3pNME1Bb0dDQ3FHU000OUJBTUNNQlV4RXpBUkJnTlZCQU1NQ21WSmJuWnZhV05wYm1jd0hoY05NalV3T0RFNE1UQXlNVFV5V2hjTk16QXdPREUzTWpFd01EQXdXakJwTVFzd0NRWURWUVFHRXdKVFFURVNNQkFHQTFVRUNnd0pkR1Z6ZENCeVpYTjBNUk13RVFZRFZRUUxEQW94TWpNME5UWTNPRGs0TVRFd0x3WURWUVFERENoVVUxUXRPRGN6TmpWbU5tWXRaVE5pWkMwMFptWTVMV0psWmpBdFpESXhORGRrTWpSbU0ySXhNRll3RUFZSEtvWkl6ajBDQVFZRks0RUVBQW9EUWdBRURiTXFXTkF0TjBuYU1PVHUzaTcybldMMlJlazR6RmZnZEdHRmtjc0JkVDVPVyswNjUvSzJLelpzcTlGb2NEcXJrQWhhZlBRWldGRlRqS0wxT1RIenpxT0J4VENCd2pBTUJnTlZIUk1CQWY4RUFqQUFNSUd4QmdOVkhSRUVnYWt3Z2Fha2dhTXdnYUF4UWpCQUJnTlZCQVFNT1RFdFRXbGpjbTlRVDFOOE1pMHhMakF1TUh3ekxUZzNNelkxWmpabUxXVXpZbVF0TkdabU9TMWlaV1l3TFdReU1UUTNaREkwWmpOaU1URWZNQjBHQ2dtU0pvbVQ4aXhrQVFFTUR6TXdNVEF4TWpReE5EVXhNREV5TXpFTk1Bc0dBMVVFREF3RU1UQXdNREVWTUJNR0ExVUVHZ3dNZEdWemRDQmhaR1J5WlhOek1STXdFUVlEVlFRUERBcFNaWE4wWVhWeVlXNTBNQW9HQ0NxR1NNNDlCQU1DQTBnQU1FVUNJRGpTNXQwMlh4a21KdUFBVHJoNkFSU0ZyYlFsV3R0dFBqM29MRGJVY0xsS0FpRUF3aVNHVFBOMUowWXJjaFdOWWF6N2hISHpuemdhbkFQMFJLdUdmOTdycUdzPQ==', 'secret': 'JzBpBfaYKZARkTSbK4Hq/BlEEslycGoOxiSNPtcFb78=', 'errors': None}
2025-08-18 12:23:19,303 - INFO - Requesting Production CSID for request_id: 1234567890123
2025-08-18 12:23:19,739 - ERROR - Non-JSON response: 
2025-08-18 12:23:19,739 - ERROR - Unexpected error in Production CSID endpoint
Traceback (most recent call last):
  File "C:\Users\scorp\Desktop\MicroPOS\ksa-compliance\routers\onboarding.py", line 169, in get_production_csid_endpoint
    raise HTTPException(
fastapi.exceptions.HTTPException: 401: 
2025-08-18 12:26:43,036 - INFO - Requesting Production CSID for request_id: 1234567890123
2025-08-18 12:26:43,451 - INFO - Successfully received Production CSID
2025-08-19 08:28:28,528 - INFO - Received CSR generation request for VAT: 301012414510123
2025-08-19 08:28:30,707 - INFO - CSR generation successful, UUID: 2e54d33e-b557-4e65-868a-f3072a469834
2025-08-19 08:29:07,686 - INFO - Sending CSR to Compliance API
2025-08-19 08:29:07,686 - INFO - https://gw-fatoora.zatca.gov.sa/e-invoicing/developer-portal/compliance
2025-08-19 08:29:08,347 - INFO - Compliance CSID response: {'requestID': 1234567890123, 'dispositionMessage': 'ISSUED', 'binarySecurityToken': 'TUlJQ05EQ0NBZHVnQXdJQkFnSUdBWmpCQkdPVk1Bb0dDQ3FHU000OUJBTUNNQlV4RXpBUkJnTlZCQU1NQ21WSmJuWnZhV05wYm1jd0hoY05NalV3T0RFNU1EWXlPVEF5V2hjTk16QXdPREU0TWpFd01EQXdXakJwTVFzd0NRWURWUVFHRXdKVFFURVNNQkFHQTFVRUNnd0pkR1Z6ZENCeVpYTjBNUk13RVFZRFZRUUxEQW94TWpNME5UWTNPRGs0TVRFd0x3WURWUVFERENoVVUxUXRNbVUxTkdRek0yVXRZalUxTnkwMFpUWTFMVGcyT0dFdFpqTXdOekpoTkRZNU9ETTBNRll3RUFZSEtvWkl6ajBDQVFZRks0RUVBQW9EUWdBRS9saXdKSkNSYXRCVG9kM1JUT2xXd0t0UE1pRG51NWRUQm0xZUNsOVZwekM1NVd0Q0N1OVExSmNyZkkxempob3N1em5OekxWK0hqckJIQVlDNmFkODc2T0J4VENCd2pBTUJnTlZIUk1CQWY4RUFqQUFNSUd4QmdOVkhSRUVnYWt3Z2Fha2dhTXdnYUF4UWpCQUJnTlZCQVFNT1RFdFRXbGpjbTlRVDFOOE1pMHhMakF1TUh3ekxUSmxOVFJrTXpObExXSTFOVGN0TkdVMk5TMDROamhoTFdZek1EY3lZVFEyT1Rnek5ERWZNQjBHQ2dtU0pvbVQ4aXhrQVFFTUR6TXdNVEF4TWpReE5EVXhNREV5TXpFTk1Bc0dBMVVFREF3RU1UQXdNREVWTUJNR0ExVUVHZ3dNZEdWemRDQmhaR1J5WlhOek1STXdFUVlEVlFRUERBcFNaWE4wWVhWeVlXNTBNQW9HQ0NxR1NNNDlCQU1DQTBjQU1FUUNJQzN2WnZIRDljT29xbnpFQ0U0cmRLNmd2WDJRUWM3RUJGSHU0Y2xrZGVtakFpQmNmZzBQMlhEQjlVWWQveVRnUFhMdlZNWTlWOXdDRnZydDdvMTJIYnlUZnc9PQ==', 'secret': 'pu+RF3vvBa/pj5Gdiw/3hUCZi3lSP9T5LvNmA7iMfnE=', 'errors': None}
2025-08-19 15:52:00,031 - INFO - Received CSR generation request for VAT: 301012414510123
2025-08-19 15:52:00,509 - INFO - CSR generation successful, UUID: d053522f-0e11-483d-a67a-5a37c6c6c1fd
2025-08-19 15:52:19,512 - INFO - Sending CSR to Compliance API
2025-08-19 15:52:19,512 - INFO - https://gw-fatoora.zatca.gov.sa/e-invoicing/developer-portal/compliance
2025-08-19 15:52:20,131 - INFO - Compliance CSID response: {'requestID': 1234567890123, 'dispositionMessage': 'ISSUED', 'binarySecurityToken': 'TUlJQ05qQ0NBZHVnQXdJQkFnSUdBWmpDbWlwWU1Bb0dDQ3FHU000OUJBTUNNQlV4RXpBUkJnTlZCQU1NQ21WSmJuWnZhV05wYm1jd0hoY05NalV3T0RFNU1UTTFNakUxV2hjTk16QXdPREU0TWpFd01EQXdXakJwTVFzd0NRWURWUVFHRXdKVFFURVNNQkFHQTFVRUNnd0pkR1Z6ZENCeVpYTjBNUk13RVFZRFZRUUxEQW94TWpNME5UWTNPRGs0TVRFd0x3WURWUVFERENoVVUxUXRaREExTXpVeU1tWXRNR1V4TVMwME9ETmtMV0UyTjJFdE5XRXpOMk0yWXpaak1XWmtNRll3RUFZSEtvWkl6ajBDQVFZRks0RUVBQW9EUWdBRXduTWU0VnJ6ZStNZ20xSlppV0cveEwxNnJwTG1EdEJiSkpORmpUakpWUVhIZ05nK3NXaGlzMjlpWThoUE1qMU05NW1uMnMxNE93b1JvdjBlZUYyeGI2T0J4VENCd2pBTUJnTlZIUk1CQWY4RUFqQUFNSUd4QmdOVkhSRUVnYWt3Z2Fha2dhTXdnYUF4UWpCQUJnTlZCQVFNT1RFdFRXbGpjbTlRVDFOOE1pMHhMakF1TUh3ekxXUXdOVE0xTWpKbUxUQmxNVEV0TkRnelpDMWhOamRoTFRWaE16ZGpObU0yWXpGbVpERWZNQjBHQ2dtU0pvbVQ4aXhrQVFFTUR6TXdNVEF4TWpReE5EVXhNREV5TXpFTk1Bc0dBMVVFREF3RU1UQXdNREVWTUJNR0ExVUVHZ3dNZEdWemRDQmhaR1J5WlhOek1STXdFUVlEVlFRUERBcFNaWE4wWVhWeVlXNTBNQW9HQ0NxR1NNNDlCQU1DQTBrQU1FWUNJUUNjT1AzK3ZBZldPY2pkMk9OTjV4RGJpSll1bzBmQ0ZzY1Q4TWlhSkNhUmZ3SWhBSTVGWjQxZWRGbHdPOVV0b0liV3BoVi9XOWNQWDYwUUJ6K0FjQ1IzaktjUQ==', 'secret': 'ra5BnbIpB5k3f1shrQv60tO1b1JvNt1dHJPwmKePqCs=', 'errors': None}
2025-08-19 16:04:04,894 - INFO - Requesting Production CSID for request_id: 1234567890123
2025-08-19 16:04:05,584 - INFO - Successfully received Production CSID
2025-08-20 13:29:15,482 - INFO - Received CSR generation request for VAT: 301012414510123
2025-08-20 13:29:16,098 - INFO - CSR generation successful, UUID: 32a99f82-6905-454a-9a30-c9c2abd98727
2025-08-20 13:29:36,292 - INFO - Sending CSR to Compliance API
2025-08-20 13:29:36,292 - INFO - https://gw-fatoora.zatca.gov.sa/e-invoicing/developer-portal/compliance
2025-08-20 13:29:37,141 - INFO - Compliance CSID response: {'requestID': 1234567890123, 'dispositionMessage': 'ISSUED', 'binarySecurityToken': 'TUlJQ05EQ0NBZHVnQXdJQkFnSUdBWmpIUGR1bk1Bb0dDQ3FHU000OUJBTUNNQlV4RXpBUkJnTlZCQU1NQ21WSmJuWnZhV05wYm1jd0hoY05NalV3T0RJd01URXlPVE14V2hjTk16QXdPREU1TWpFd01EQXdXakJwTVFzd0NRWURWUVFHRXdKVFFURVNNQkFHQTFVRUNnd0pkR1Z6ZENCeVpYTjBNUk13RVFZRFZRUUxEQW94TWpNME5UWTNPRGs0TVRFd0x3WURWUVFERENoVVUxUXRNekpoT1RsbU9ESXROamt3TlMwME5UUmhMVGxoTXpBdFl6bGpNbUZpWkRrNE56STNNRll3RUFZSEtvWkl6ajBDQVFZRks0RUVBQW9EUWdBRUdRNlpsZDlmTVBsZjFEQXNhT01iUHIyWnBrQ2RSc1ZkQ29sU29CT1NSTlc3NVdFMSs0Vy9DQThMbE9ZTlJJSlZ4ZGs3Q0lDanprcU5mVE9VenJvMi82T0J4VENCd2pBTUJnTlZIUk1CQWY4RUFqQUFNSUd4QmdOVkhSRUVnYWt3Z2Fha2dhTXdnYUF4UWpCQUJnTlZCQVFNT1RFdFRXbGpjbTlRVDFOOE1pMHhMakF1TUh3ekxUTXlZVGs1WmpneUxUWTVNRFV0TkRVMFlTMDVZVE13TFdNNVl6SmhZbVE1T0RjeU56RWZNQjBHQ2dtU0pvbVQ4aXhrQVFFTUR6TXdNVEF4TWpReE5EVXhNREV5TXpFTk1Bc0dBMVVFREF3RU1UQXdNREVWTUJNR0ExVUVHZ3dNZEdWemRDQmhaR1J5WlhOek1STXdFUVlEVlFRUERBcFNaWE4wWVhWeVlXNTBNQW9HQ0NxR1NNNDlCQU1DQTBjQU1FUUNJQ3lHSkZhcm1xdUVoRW9DbTI5dGp2d1hIeGFNM3AwU0FxTlRxajFFWEFBS0FpQjRXUzFyQVN2MUtQcitLSE50UHdpTTMyQ2E0dHdFS2FoR1ZVVzRhVjZsVWc9PQ==', 'secret': '5N73gCs++AE57F/Kvbbl/cAST/EpCJbzCkUPMyc9A88=', 'errors': None}
